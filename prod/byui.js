var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};(function(){function a(c,a){for(var b=c.split('.'),d=a.split('.');b.length<d.length;)b.unshift(0);for(;d.length<b.length;)d.unshift(0);for(var e=0;e<b.length;e+=1){if(+b[e]>+d[e])return!1;if(+b[e]<+d[e])return!0}return!1}function b(a,b,c,d){function e(c){g||(c?(g=!0,d.call(a,c)):(f+=1,f===b.length&&d.call(a,null)))}if(0===b.length)return void d.call(a,null);var f=0,g=!1;b.forEach(function(b){return c.call(a,b,e)})}function c(a,b){if('development'===h.mode)if(2===arguments.length&&'string'==typeof a&&'object'===('undefined'==typeof b?'undefined':_typeof(b)))console.groupCollapsed(a),console.log(b),console.groupEnd();else{var c;(c=console).log.apply(c,arguments)}}function d(a,b){if(!document.querySelector('script[src="'+a+'"]')){c('Loading Script from '+a);var d=document.createElement('script');d.dataset.readyState='loading',d.src=a,b&&(d.addEventListener('load',function(){return b(null)},{once:!0}),d.addEventListener('error',function(){return b(new Error('Error loading '+a))},{once:!0})),document.head.appendChild(d)}}function e(a){if(null===document.querySelector('link[href="'+a+']"')){c('Loading Stylesheet from '+a);var b=document.createElement('link');b.rel='stylesheet',b.type='text/css',b.href=a,document.head.appendChild(b)}else c('Already Loaded Stylesheet from '+a)}function f(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){try{if(4===this.readyState)if(200===this.status){var a=JSON.parse(c.responseText);b(null,a)}else b(new Error('Failed to retrieve, got a status code '+this.status))}catch(a){b(a)}},c.open('GET',a,!0),c.setRequestHeader('accept','application/json, text/javascript, application/json+canvas-string-ids, */*; q=0.01'),c.send()}function g(a,b){document.head.insertAdjacentHTML('beforeend','<div id="byui-quizzes-next-tooltip" style="display: none;">'+b+'</div>'),document.head.insertAdjacentHTML('beforeend','\n      <style>\n          .tippy-tooltip.byui-theme {\n              border: 2px solid '+a+';\n              background-color: white;\n              color: black;\n              max-width: 200px;\n          }\n          .tippy-backdrop {\n              background: white;\n          }\n      </style>\n    ')}var h={version:'0.0.1',mode:'development',resources:{},actions:{},defaultResource:{dependencies:[],scripts:[],styles:[],xhr:null,hasExistingInstance:function a(){return!1},findValue:function a(){return null},_value:null,_error:null,_readyState:'unknown'},defaultAction:{dependencies:[],on:null,run:function a(){}},defineResource:function c(a,b){this.resources[a]=Object.assign({},this.defaultResource,b),this.resources[a]._callbacks=[],this.resources[a]._tag=a},defineAction:function c(a,b){this.actions[a]=Object.assign({},this.defaultAction,b),this.actions[a]._tag=a},getResourceValue:function e(a,b){if(void 0===this.resources[a])throw new Error('No resource defined with \''+a+'\' tag');var d=this.resources[a];if('unknown'===d._readyState&&(d.hasExistingInstance()?(c(a+' already on the page'),this.setResourceValue(a)):(d._readyState='loading',this.loadResource(a))),'loading'===d._readyState)c('Waiting for '+a),d._callbacks.push(b);else if('complete'===d._readyState)c('Already loaded '+a),b(d._error,d._value);else throw new Error('Unknown Loading State: '+this._readyState)},setResourceValue:function f(a,b,d){if(void 0===this.resources[a])throw new Error('No resource defined with \''+a+'\' tag');var e=this.resources[a];e._readyState='complete',b?(c('Error loading '+e._tag),e._error=b):(c('Finished loading '+e._tag),e._value=d||e.findValue()),e._callbacks.forEach(function(a){return a(e._error,e._value)}),e._callbacks=[]},loadResource:function g(a){if(void 0===this.resources[a])throw new Error('No resource defined with \''+a+'\' tag');var c=this.resources[a];b(this,c.dependencies,this.getResourceValue,function(g){var h=this;if(g)return this.setResourceValue(a,g);try{c.xhr?f(c.xhr(),function(b,c){return h.setResourceValue(a,b,c)}):(b(this,c.scripts,d,function(b){return h.setResourceValue(a,b)}),c.styles.forEach(function(a){return e(a)}))}catch(b){return this.setResourceValue(a,b)}})},getTargets:function d(a,b){var c;if('string'==typeof a.on)c=document.querySelectorAll(a.on);else if('function'==typeof a.on)c=a.on(b),c?void 0===c.length&&(c=[c]):c=[];else throw new Error(a._tag+' on is not a string or function');return c},run:function j(a){var d=this;if(void 0===this.actions[a])throw new Error('No action defined with \''+a+'\' tag');for(var e=this.actions[a],f=[],g=1;void 0!==arguments[g];g+=1)f.push(arguments[g]);var h=this.getTargets(e,f);h.length?b(this,e.dependencies,this.getResourceValue,function(b){if(b)return console.error(b),void c('\u274C '+a);var g=!1,i=e.dependencies.map(function(a){return d.resources[a]._value});h.forEach(function(b){try{e.run.apply(b,i.concat(f))}catch(b){b.message='(from '+a+' action) '+b.message,console.warn(b),g=!0}}),g?c('\u274C '+a):c('\u26AB '+a)}):c('\u26AA '+a)},onload:function a(){Object.keys(this.actions).forEach(function(a){return h.run(a)})}};if(c('Resources:',h.resources),c('Actions:',h.actions),window.ByuiThemeLoader){var l=window.ByuiThemeLoader;'development'===h.mode||a(l.version,h.version)?l.onload=function(){console.warn('ByuiThemeLoader@'+l.version+' was replaced by version @'+h.version),h.onload()}:console.warn('Couldn\'t use ByuiThemeLoader@'+h.version+' higher version @'+l.version+' exists on the page')}else window.ByuiThemeLoader=h,window.addEventListener('load',function(){return h.onload()});h.defineResource('Prism',{scripts:['https://content.byui.edu/integ/gen/a40c34d7-9f6f-4a18-a41d-2f40e2b2a18e/0/codeHighlighter.js'],styles:['https://content.byui.edu/integ/gen/a40c34d7-9f6f-4a18-a41d-2f40e2b2a18e/0/codeHighlighter.css'],findValue:function a(){return window.Prism}}),h.defineResource('Tippy',{scripts:['https://content.byui.edu/integ/gen/a422cccd-35b7-4087-9329-20698cf169b0/0/tippy.all.min.js'],findValue:function a(){return window.tippy}}),h.defineResource('Slick',{dependencies:['jQuery'],scripts:['https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js'],styles:['https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.css','https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.css']}),h.defineResource('jQuery',{scripts:['https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js'],hasExistingInstance:function b(){return void 0!==window.jQuery&&void 0!==window.jQuery().jquery&&a('1.7.0',window.jQuery().jquery)},findValue:function a(){return window.jQuery.noConflict()}}),h.defineResource('Modules',{xhr:function a(){return'/api/v1/courses/'+document.location.pathname.split('/')[2]+'/modules?per_page=100'}}),h.defineResource('Teachers',{xhr:function a(){return'/api/v1/courses/'+document.location.pathname.split('/')[2]+'/enrollments?type%5B%5D=TeacherEnrollment'}}),h.defineAction('Accordions',{on:'.byui div.accordion',dependencies:['jQuery'],run:function b(a){a(this).accordion({heightStyle:'content',collapsible:!0,active:!1})}}),h.defineAction('Breadcrumbs',{on:function a(){return 4===document.querySelectorAll('#breadcrumbs li').length&&/\.com\/courses\/\d+\/(?!groups)/i.test(window.location.href)},run:function b(){document.querySelector('#breadcrumbs li:nth-child(3) span').innerHTML='Modules';var a=document.querySelector('#breadcrumbs li:nth-child(3) a');a.href=a.href.replace(/\/\w+$/i,'/modules')}}),h.defineAction('Carousels',{on:'.byui .carousel',dependencies:['jQuery','Slick'],run:function b(a){a(this).slick({dots:!0})}}),h.defineAction('CodeHighlighting',{on:'.byui pre code',dependencies:['Prism']}),h.defineAction('CopyrightFooter',{on:function a(){return!document.querySelector('p.copyright')&&!document.querySelector('p#byui-copyright')&&document.querySelector('#content')},run:function a(){this.insertAdjacentHTML('beforeend','<p id=\'byui-copyright\'>Copyright '+new Date().getFullYear()+' Brigham Young University-Idaho</p>')}}),h.defineAction('Dialog',{on:'.byui .Button[id^="link_"]',dependencies:['jQuery'],run:function d(a){var b=this.id.replace('link_',''),c=a('.byui #dialog_for_link_'+b);if(!c.length)throw new Error('No Associated Dialog Found');c.dialog({autoOpen:!1}),this.addEventListener('click',function(a){a.preventDefault(),c.dialog('open')})}}),h.defineAction('EditorStyles',{on:function a(){return window.tinyMCE},run:function c(){var a=[/byui\.css$/,/online\.css$/,/common[\w-]*\.css$/,/variables[\w-]*\.css$/,/campus\.css$/,/pathway\.css$/],b=[];document.querySelectorAll('link[rel=stylesheet]').forEach(function(c){var d=c.getAttribute('href');a.some(function(a){return a.test(d)})&&b.push(d)}),window.tinyMCE.editors.forEach(function(a){b.forEach(function(b){a.dom.styleSheetLoader.load(b)})})}}),h.defineAction('Homepage.Start',{on:'.byui #navigation .steps #start',dependencies:['Modules'],run:function b(a){this.href='/courses/'+k+'/modules#module_'+a[0].id}}),h.defineAction('Homepage.Tutorial',{on:'.byui #navigation .steps #tutorial',run:function a(){this.href='http://byu-idaho.screenstepslive.com/s/16998/m/76692/l/865828-canvas-student-orientation?token=aq7F_UOmeDIj-6lBVDaXBdOQ01pfx1jw'}}),h.defineAction('Homepage.Resources',{on:'.byui #navigation .steps #resources',dependencies:['Modules'],run:function c(a){var b=a.find(function(a){return /student\s*resources/i.test(a.name)});if(!b)throw new Error('Couldn\'t find student resources module');this.href='/courses/'+k+'/modules#module_'+b.id}}),h.defineAction('Homepage.Instructor',{on:'.byui #navigation .steps #instructor',dependencies:['Teachers'],run:function c(a){var b=a.map(function(a){return a.user_id}).filter(function(a,b,c){return c.indexOf(a)===b});if(1<b.length)throw new Error('Multiple teachers are enrolled in this course. Please add "Your Instructor" link manually.');if(0===b.length)throw new Error('Unable to find teacher enrollment.');this.href='/courses/'+k+'/users/'+b[0]}}),h.defineAction('Homepage.Lessons',{on:'.byui #navigation .lessons.generate',dependencies:['Modules'],run:function e(a){var b=this;this.innerHTML='';var c=a.filter(function(a){return /(Week|Lesson|Unit)\s*(1[0-9]|0?\d(\D|$))/gi.test(a.name)}),d=7<c.length?7:c.length;c.forEach(function(a,c){var e=(10>c?'0':'')+(c+1);b.insertAdjacentHTML('beforeend','<a href=\'/courses/'+k+'/modules#module_'+a.id+'\' style=\'width: calc(100% / '+d+' - 20px);\'>'+e+'</a>')})}}),h.defineAction('ToolTips.onNewQuiz',{on:'#application .new_quiz_lti_wrapper',dependencies:['Tippy'],run:function b(a){g('black','Be sure to periodically review the <a href="'+j+'" target="_blank">Quizzes.Next FAQs</a> to keep updated on new features'),a('#application .new_quiz_lti_wrapper',{html:'#'+i,interactive:!0,placement:'bottom-end',theme:'byui',size:'large'})}}),h.defineAction('ToolTips.onSettings',{on:'.course-feature-flags .quizzes_next',dependencies:['Tippy'],run:function b(a){g('red','Please review <a href="'+j+'" target="_blank">these FAQs</a> to see the benefits and cautions before using Quizzes.Next'),a('.course-feature-flags .quizzes_next',{html:'#'+i,interactive:!0,placement:'bottom-end',theme:'byui',size:'large'})}}),h.defineAction('Tabs',{on:'.byui #styleguide-tabs-demo-minimal',dependencies:['jQuery'],run:function b(a){a(this).tabs()}}),h.defineAction('VideoTags',{on:'.byui-video',run:function a(){if('youtube'===this.dataset.source)this.innerHTML='<iframe width="'+this.dataset.width+'px" height="'+this.dataset.height+'px" src="https://www.youtube.com/embed/'+this.dataset.vidid+'" frameborder="0" allowfullscreen></iframe>';else if('kaltura'===this.dataset.source)this.innerHTML='<iframe width="'+this.dataset.width+'px" height="'+this.dataset.height+'px" src="https://cdnapisec.kaltura.com/p/1157612/sp/115761200/embedIframeJs/uiconf_id/29018071/partner_id/1157612?iframeembed=true&amp;playerId=kaltura_player_1485805514&amp;entry_id='+this.dataset.vidid+'&amp;flashvars[streamerType]=auto" frameborder="0" allowfullscreen></iframe>';else throw new Error('Video not from youtube or kaltura')}});var i='byui-quizzes-next-tooltip',j='http://byu-idaho.screenstepslive.com/s/14177/m/73336/l/970385-quizzes-next-faq-s',k=document.location.pathname.split('/')[2]})();
//# sourceMappingURL=byui.js.map
