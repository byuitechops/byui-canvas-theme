{"version":3,"sources":["byui.js"],"names":["getItem","console","warn","window","onload","onloadFunctions","document","addEventListener","main","checkForJquery","loadJquery","jqueryScript","createElement","href","head","appendChild","$","validVersion","minimumVersion","version","jQuery","fn","jquery","split","every","minVersionNum","i","loadjQueryErr","error","querySelectorAll","length","slick","dots","carouselErr","tinyMCE","regExes","cssHrefs","reduce","accum","linkTag","getAttribute","some","match","regEx","push","editors","forEach","editor","dom","styleSheetLoader","load","editorErr","courseNumber","location","pathname","accordion","heightStyle","collapsible","active","accordionErr","tabs","tabErr","dialog","dialogErr","videos","dataset","source","innerHTML","width","height","vidid","videoErr","generateSteps","modules","resourcesModule","find","test","canvasModule","name","start","querySelector","iLearnTutorial","resources","instructor","id","get","teachers","filter","teacher","findIndex","teach","user_id","log","generateStepsErr","generateLessons","generateLessonLink","moduleId","moduleCount","lessonWrapperSelector","insertAdjacentHTML","modulesPerRow","classList","includes","validModules","generateLessonErr","stepsExist","lessonsExist","selectorErr","replace","breadcrumbErr","codeUsed","jsEle","cssEle","src","rel","prismErr","page","getElementById","Date","getFullYear","Error","copyrightErr","borderColor","styleGuts","script","type","async","tippy","html","interactive","placement","theme","size","tooltipErr","slickScript","slickScriptCss","slickScriptTheme","slickErr"],"mappings":"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","file":"byui.js","sourcesContent":["/*eslint-env browser */\r\n/* eslint no-console:0 */\r\n/* global tinyMCE, tippy, $, jQuery */\r\n\r\n/* Allows us to disable this page for testing purposes */\r\n// TESTING disable for prod\r\n// if (true) {\r\nif (localStorage.getItem('devAccount') !== 'true') {\r\n    window.onload = onloadFunctions;\r\n    document.addEventListener('DOMContentLoaded', main);\r\n} else {\r\n    console.warn('byui.js disabled for testing');\r\n}\r\n\r\nfunction checkForJquery() {\r\n    function loadJquery() {\r\n        var jqueryScript = document.createElement('script');\r\n        jqueryScript.href = 'https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js';\r\n        document.head.appendChild(jqueryScript);\r\n    }\r\n    try {\r\n        if (typeof $ != 'undefined') {\r\n            // check version number\r\n            var minimumVersion = '1.7.2'.split('.');\r\n            var version = jQuery.fn.jquery.split('.');\r\n            var validVersion;\r\n\r\n            validVersion = minimumVersion.every((minVersionNum, i) => {\r\n                return minimumVersion <= version[i];\r\n            });\r\n\r\n            if (!validVersion) {\r\n                loadJquery();\r\n            } \r\n        } else {\r\n            loadJquery();\r\n        }\r\n    } catch (loadjQueryErr) {\r\n        console.error(loadjQueryErr);\r\n        loadJquery();\r\n    }\r\n}\r\n\r\n/* controls functions which run onload (after DOMContentLoaded) */\r\nfunction onloadFunctions() {\r\n\r\n    /* Initialize carousels if any are present on page */\r\n    function initializeCarousel() {\r\n        try {\r\n            if (document.querySelectorAll('.carousel').length > 0) {\r\n                checkForJquery();\r\n\r\n                $('.carousel').slick({\r\n                    dots: true\r\n                });\r\n            }\r\n        } catch (carouselErr) {\r\n            console.error(carouselErr);\r\n        }\r\n    }\r\n\r\n    /* inject css into tinyMCE editors on page. Has to wait till tinyMCE is done loading */\r\n    function editorStyles() {\r\n        try {\r\n            /* if there are no WYSIWYG's on the page, don't bother running */\r\n            if (typeof tinyMCE === 'undefined') {\r\n                return;\r\n            }\r\n            /* our css, canvas common css, canvas color vars css */\r\n            var regExes = [/byui\\.css$/, /online\\.css$/, /common[\\w-]*\\.css$/, /variables[\\w-]*\\.css$/, /campus\\.css$/, /pathway\\.css$/];\r\n            var cssHrefs = [...document.querySelectorAll('link[rel=stylesheet]')].reduce((accum, linkTag) => {\r\n                var href = linkTag.getAttribute('href');\r\n\r\n                /* only keep the link if it matches one of the regExes */\r\n                if (regExes.some(regEx => href.match(regEx) !== null)) {\r\n                    accum.push(href);\r\n                }\r\n                return accum;\r\n            }, []);\r\n\r\n            tinyMCE.editors.forEach(editor => {\r\n                cssHrefs.forEach(href => {\r\n                    editor.dom.styleSheetLoader.load(href);\r\n                });\r\n            });\r\n\r\n        } catch (editorErr) {\r\n            console.error(editorErr);\r\n        }\r\n    }\r\n\r\n    initializeCarousel();\r\n    editorStyles();\r\n}\r\n\r\n\r\nfunction main() {\r\n    var courseNumber = document.location.pathname.split('/')[2];\r\n\r\n    /* Initialize accordion - JQUERY UI */\r\n    function initializeAccordion() {\r\n        try {\r\n            $('div.accordion').accordion({\r\n                heightStyle: 'content',\r\n                collapsible: true,\r\n                active: false\r\n            });\r\n        } catch (accordionErr) {\r\n            console.error(accordionErr);\r\n        }\r\n    }\r\n\r\n    /* Initialize dialog - JQUERY UI */\r\n    function initializeDialog() {\r\n        try {\r\n            $('div.dialog').dialog();\r\n        } catch (dialogErr) {\r\n            console.error(dialogErr);\r\n        }\r\n    }\r\n\r\n    /* Initialize tabs - JQUERY UI */\r\n    // TODO are we even using this???\r\n    function initializeTabs() {\r\n        try {\r\n            $('#styleguide-tabs-demo-minimal').tabs();\r\n        } catch (tabErr) {\r\n            console.error(tabErr);\r\n        }\r\n    }\r\n\r\n    /* Insert custom video tag generation scripts */\r\n    function insertVideoTag() {\r\n        try {\r\n            var videos = document.querySelectorAll('.byui-video');\r\n            for (var i = 0; i < videos.length; i++) {\r\n                if (videos[i].dataset.source == 'youtube') {\r\n                    videos[i].innerHTML = `<iframe width=\"${videos[i].dataset.width}px\" height=\"${videos[i].dataset.height}px\" src=\"https://www.youtube.com/embed/${videos[i].dataset.vidid}\" frameborder=\"0\" allowfullscreen></iframe>`;\r\n                } else if (videos[i].dataset.source == 'kaltura') {\r\n                    videos[i].innerHTML = `<iframe width=\"${videos[i].dataset.width}px\" height=\"${videos[i].dataset.height}px\" src=\"https://cdnapisec.kaltura.com/p/1157612/sp/115761200/embedIframeJs/uiconf_id/29018071/partner_id/1157612?iframeembed=true&amp;playerId=kaltura_player_1485805514&amp;entry_id=${videos[i].dataset.vidid}&amp;flashvars[streamerType]=auto\" frameborder=\"0\" allowfullscreen></iframe>`;\r\n                }\r\n            }\r\n        } catch (videoErr) {\r\n            console.error(videoErr);\r\n        }\r\n    }\r\n\r\n    /* handles all functions required to generate the course homepage */\r\n    function generateHomePage() {\r\n        /* generate top buttons (under.steps) */\r\n        function generateSteps(modules) {\r\n            try {\r\n                /* Get additional resources module item */\r\n                var resourcesModule = modules.find(canvasModule => /student\\s*resources/i.test(canvasModule.name));\r\n\r\n                /* set home page buttons */\r\n                var start = document.querySelector('#start'),\r\n                    iLearnTutorial = document.querySelector('#tutorial'),\r\n                    resources = document.querySelector('#resources'),\r\n                    instructor = document.querySelector('#instructor');\r\n\r\n                if (start)\r\n                    start.href = `/courses/${courseNumber}/modules#module_${modules[0].id}`;\r\n                if (iLearnTutorial)\r\n                    iLearnTutorial.href = 'http://byu-idaho.screenstepslive.com/s/16998/m/76692/l/865828-canvas-student-orientation?token=aq7F_UOmeDIj-6lBVDaXBdOQ01pfx1jw';\r\n                if (resources && resourcesModule)\r\n                    resources.href = `/courses/${courseNumber}/modules#module_${resourcesModule.id}`;\r\n\r\n\r\n                /* generate link to instructor bio - make the api call to get enrollments*/\r\n                $.get(`https://byui.instructure.com/api/v1/courses/${courseNumber}/enrollments?type%5B%5D=TeacherEnrollment&per_page=50`, teachers => {\r\n                    /* check for multiple instances of the same teacher */\r\n                    // TODO which one of these is faster?\r\n                    // teachers = teachers.map(teacher => teacher.user_id).filter((teacherId, i, teachers) => teachers.indexOf(teacherId) === i);\r\n                    teachers = teachers.filter((teacher, i, teachers) => teachers.findIndex(teach => teach.user_id == teacher.user_id) == i);\r\n\r\n\r\n                    if (teachers.length > 1) {\r\n                        /* If there are multiple unique teachers */\r\n                        console.log('Multiple teachers are enrolled in this course. Please add \"Your Instructor\" link manually.');\r\n                    } else if (teachers.length === 0) {\r\n                        /* if the teacher isn't enrolled for some reason */\r\n                        console.log('Unable to find teacher enrollment.');\r\n                    } else {\r\n                        /* if we have one teacher set the URL */\r\n                        instructor.href = `/courses/${courseNumber}/users/${teachers[0].user_id}`;\r\n                    }\r\n                });\r\n            } catch (generateStepsErr) {\r\n                console.error(generateStepsErr);\r\n            }\r\n        }\r\n\r\n        /* generate lesson links (under .lessons) */\r\n        function generateLessons(modules) {\r\n            try {\r\n                /* Generate a Module link - called by above try statement */\r\n                function generateLessonLink(moduleId, moduleCount) {\r\n                    moduleCount++;\r\n                    /* append leading 0 */\r\n                    if (moduleCount < 10)\r\n                        moduleCount = `0${moduleCount}`;\r\n                    document.querySelector(lessonWrapperSelector).insertAdjacentHTML('beforeend', `<a href='/courses/${courseNumber}/modules#module_${moduleId}' style='width: calc(100% / ${modulesPerRow} - 20px);'>${moduleCount}</a>`);\r\n                }\r\n\r\n                var lessonWrapperSelector = '#navigation .lessons';\r\n\r\n                /* clear lesson div & generate module links if generate class exists */\r\n                if ([...document.querySelector(lessonWrapperSelector).classList].includes('generate')) {\r\n                    document.querySelector(lessonWrapperSelector).innerHTML = '';\r\n                    /* remove modules with invalid names & get modulesPerRow (limit 7) */\r\n                    var validModules = modules.filter(canvasModule => {\r\n                            return /(Week|Lesson|Unit)\\s*(1[0-9]|0?\\d(\\D|$))/gi.test(canvasModule.name);\r\n                        }),\r\n                        modulesPerRow = validModules.length > 7 ? 7 : validModules.length;\r\n\r\n                    /* generate module links */\r\n                    validModules.forEach((canvasModule, i) => {\r\n                        generateLessonLink(canvasModule.id, i);\r\n                    });\r\n                }\r\n            } catch (generateLessonErr) {\r\n                console.error(generateLessonErr);\r\n            }\r\n        }\r\n\r\n        try {\r\n            /* quit if we are not on the course homepage OR the page is missing the expected format */\r\n            let stepsExist = document.querySelectorAll('#navigation .steps').length > 0,\r\n                lessonsExist = document.querySelectorAll('#navigation .lessons').length > 0;\r\n            if (!stepsExist || !lessonsExist) {\r\n                return;\r\n            }\r\n\r\n            /* get course modules */\r\n            $.get('/api/v1/courses/' + courseNumber + '/modules?per_page=30', (modules) => {\r\n                /* Don't run steps if they don't exist (or lessons) */\r\n                if (stepsExist) {\r\n                    generateSteps(modules);\r\n                }\r\n                if (lessonsExist) {\r\n                    generateLessons(modules);\r\n                }\r\n            });\r\n        } catch (selectorErr) {\r\n            console.error(selectorErr);\r\n        }\r\n    }\r\n\r\n    /* Hide the 3rd breadcrumb */\r\n    function alterBreadcrumb() {\r\n        try {\r\n            /* If there are 4 total, AND we're inside a course AND we're not in a group tab */\r\n            if (document.querySelectorAll('#breadcrumbs li').length === 4 && /\\.com\\/courses\\/\\d+\\/(?!groups)/i.test(window.location.href)) {\r\n                document.querySelectorAll('#breadcrumbs li:nth-child(3) span')[0].innerHTML = 'Modules';\r\n                /* update the link */\r\n                document.querySelectorAll('#breadcrumbs li:nth-child(3) a')[0].href = document.querySelectorAll('#breadcrumbs li:nth-child(3) a')[0].href.replace(/\\/\\w+$/i, '/modules');\r\n            }\r\n        } catch (breadcrumbErr) {\r\n            console.error(breadcrumbErr);\r\n        }\r\n    }\r\n\r\n    /* enable prism pre > code highlighting */\r\n    function prismHighlighting() {\r\n        try {\r\n            let codeUsed = document.querySelector('pre code');\r\n            if (codeUsed == null) return;\r\n\r\n            let jsEle = document.createElement('script'),\r\n                cssEle = document.createElement('link');\r\n            jsEle.src = 'https://content.byui.edu/integ/gen/a40c34d7-9f6f-4a18-a41d-2f40e2b2a18e/0/codeHighlighter.js';\r\n            cssEle.href = 'https://content.byui.edu/integ/gen/a40c34d7-9f6f-4a18-a41d-2f40e2b2a18e/0/codeHighlighter.css';\r\n            cssEle.rel = 'stylesheet';\r\n            document.head.appendChild(jsEle);\r\n            document.head.appendChild(cssEle);\r\n\r\n        } catch (prismErr) {\r\n            console.error(prismErr);\r\n        }\r\n    }\r\n\r\n    /* Insert copyright footer */\r\n    function addCopyrightFooter() {\r\n        try {\r\n            var page = document.getElementById('content');\r\n            if (page) {\r\n                /* don't add one if it already exists */\r\n                if (!document.querySelector('p.copyright') && !document.querySelector('p#byui-copyright'))\r\n                    page.insertAdjacentHTML('beforeend', `<p id='byui-copyright'>Copyright ${new Date().getFullYear()} Brigham Young University-Idaho</p>`);\r\n            } else {\r\n                throw new Error('unable to add copyright footer to page');\r\n            }\r\n        } catch (copyrightErr) {\r\n            console.error(copyrightErr);\r\n        }\r\n    }\r\n\r\n    /* add quiz.next tooltips where needed */\r\n    function addTooltips() {\r\n        try {\r\n            let borderColor = 'black';\r\n            const divId = 'byui-quizzes-next-tooltip';\r\n            const assignmentsHTML = `<div id=\"${divId}\" style=\"display: none;\">Be sure to periodically review the <a href=\"http://byu-idaho.screenstepslive.com/s/14177/m/73336/l/970385-quizzes-next-faq-s\" target=\"_blank\">Quizzes.Next FAQs</a> to keep updated on new features/div>`;\r\n            const settingsHTML = `<div id=\"${divId}\" style=\"display: none;\">Please review <a href=\"http://byu-idaho.screenstepslive.com/s/14177/m/73336/l/970385-quizzes-next-faq-s\" target=\"_blank\">these FAQs</a> to see the benefits and cautions before using Quizzes.Next</div>`;\r\n\r\n            /* Add appropriate tooltip OR return if we're on the wrong page */\r\n            if (window.location.href.includes('settings')) {\r\n                document.head.insertAdjacentHTML('beforeend', settingsHTML);\r\n                borderColor = 'red';\r\n            } else if (window.location.href.includes('assignments')) {\r\n                document.head.insertAdjacentHTML('beforeend', assignmentsHTML);\r\n            } else {\r\n                return;\r\n            }\r\n\r\n            /* Add tooltip styles to DOM with appropriate border color */\r\n            const styleGuts = `<style>.tippy-tooltip.byui-theme {border: 2px solid ${borderColor};background-color: white;color: black;max-width: 200px;}.tippy-backdrop {background: white;}</style>`;\r\n\r\n            document.head.insertAdjacentHTML('beforeend', styleGuts);\r\n\r\n            /* create a script tag, add the tooltip JavaScript to it, and add the tag to the document */\r\n            const script = document.createElement('script');\r\n            script.type = 'text/javascript';\r\n            script.async = true;\r\n            script.src = 'https://content.byui.edu/integ/gen/a422cccd-35b7-4087-9329-20698cf169b0/0/tippy.all.min.js';\r\n            script.onload = () => {\r\n                tippy('.quizzes_next, .new_quiz_lti_wrapper', {\r\n                    html: `#${divId}`,\r\n                    interactive: true,\r\n                    placement: 'bottom-end',\r\n                    theme: 'byui',\r\n                    size: 'large'\r\n                });\r\n            };\r\n            document.head.appendChild(script);\r\n        } catch (tooltipErr) {\r\n            console.error(tooltipErr);\r\n        }\r\n    }\r\n\r\n    /* load JS & CSS needed for image carousels if there is one on the page */\r\n    function loadSlickJS() {\r\n        try {\r\n            /* don't load scripts if they aren't being used on the current page */\r\n            if (document.querySelector('.carousel').length === 0) {\r\n                return;\r\n            }\r\n            var slickScript = document.createElement('script');\r\n            slickScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js';\r\n            document.head.appendChild(slickScript);\r\n\r\n            var slickScriptCss = document.createElement('link');\r\n            slickScriptCss.href = 'https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.css';\r\n            slickScriptCss.rel = 'stylesheet';\r\n            document.head.appendChild(slickScriptCss);\r\n\r\n            var slickScriptTheme = document.createElement('link');\r\n            slickScriptTheme.href = 'https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.css';\r\n            slickScriptTheme.rel = 'stylesheet';\r\n            document.head.appendChild(slickScriptTheme);\r\n        } catch (slickErr) {\r\n            console.error(slickErr);\r\n        }\r\n    }\r\n\r\n    initializeAccordion();\r\n    initializeTabs();\r\n    initializeDialog();\r\n    insertVideoTag();\r\n    generateHomePage();\r\n    alterBreadcrumb();\r\n    prismHighlighting();\r\n    addCopyrightFooter();\r\n    addTooltips();\r\n    loadSlickJS();\r\n}"]}