{"version":3,"sources":["byui.js"],"names":["localStorage","getItem","window","onload","editorStyles","document","addEventListener","main","console","warn","tinyMCE","regExes","cssHrefs","querySelectorAll","reduce","accum","linkTag","href","getAttribute","some","match","regEx","push","editors","forEach","editor","dom","styleSheetLoader","load","editorErr","error","courseNumber","location","pathname","split","initializeAccordion","$","accordion","heightStyle","collapsible","active","accordionErr","initializeTabs","tabs","tabErr","insertVideoTag","videos","i","length","dataset","source","innerHTML","width","height","vidid","videoErr","generateHomePage","generateSteps","modules","get","teachers","map","teacher","user_id","filter","teacherId","indexOf","log","instructor","resourcesModule","find","test","canvasModule","name","start","querySelector","iLearnTutorial","resources","id","generateStepsErr","generateLessons","generateLessonLink","moduleId","moduleCount","lessonWrapperSelector","insertAdjacentHTML","modulesPerRow","classList","includes","validModules","generateLessonErr","selectorErr","alterBreadcrumb","replace","breadcrumbErr","prismHighlighting","codeUsed","jsEle","createElement","cssEle","src","rel","head","appendChild","prismErr","addCopyrightFooter","page","getElementById","Date","getFullYear","Error","copyrightErr","addTooltips","borderColor","divId","settingsPage","assignmentsHTML","settingsHTML","div","setAttribute","style","selectors","script","type","async","tippy","html","interactive","placement","theme","size","body"],"mappings":"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","file":"byui.js","sourcesContent":["/*eslint-env node, browser, jquery*/\r\n/* eslint no-console:0 */\r\n/* global tinyMCE */\r\n\r\n/* Allows us to disable this page for testing purposes */\r\n// TESTING disable for prod\r\n// if (true) {\r\nif (localStorage.getItem('devAccount') !== 'true') {\r\n    window.onload = editorStyles;\r\n    document.addEventListener('DOMContentLoaded', main);\r\n} else {\r\n    console.warn('byui.js disabled for testing');\r\n}\r\n\r\n/* inject css into tinyMCE editors on page. Has to wait till tinyMCE is done loading */\r\nfunction editorStyles() {\r\n    try {\r\n        /* if there are no WYSIWYG's on the page, don't bother running */\r\n        if (typeof tinyMCE === 'undefined') {\r\n            return;\r\n        }\r\n        /* our css, canvas common css, canvas color vars css */\r\n        var regExes = [/byui\\.css$/, /online\\.css$/, /common[\\w-]*\\.css$/, /variables[\\w-]*\\.css$/, /campus\\.css$/, /pathway\\.css$/];\r\n        var cssHrefs = [...document.querySelectorAll('link[rel=stylesheet]')].reduce((accum, linkTag) => {\r\n            var href = linkTag.getAttribute('href');\r\n\r\n            /* only keep the link if it matches one of the regExes */\r\n            if (regExes.some(regEx => href.match(regEx) !== null)) {\r\n                accum.push(href);\r\n            }\r\n            return accum;\r\n        }, []);\r\n\r\n        tinyMCE.editors.forEach(editor => {\r\n            cssHrefs.forEach(href => {\r\n                editor.dom.styleSheetLoader.load(href);\r\n            });\r\n        });\r\n\r\n    } catch (editorErr) {\r\n        console.error(editorErr);\r\n    }\r\n}\r\n\r\n\r\nfunction main() {\r\n    var courseNumber = document.location.pathname.split('/')[2];\r\n\r\n    /* Initialize accordion - JQUERY UI */\r\n    function initializeAccordion() {\r\n        try {\r\n            $('div.accordion').accordion({\r\n                heightStyle: 'content',\r\n                collapsible: true,\r\n                active: false\r\n            });\r\n        } catch (accordionErr) {\r\n            console.error(accordionErr);\r\n        }\r\n    }\r\n\r\n    /* Initialize tabs - JQUERY UI */\r\n    function initializeTabs() {\r\n        try {\r\n            $('#styleguide-tabs-demo-minimal').tabs();\r\n        } catch (tabErr) {\r\n            console.error(tabErr);\r\n        }\r\n    }\r\n\r\n    /* Insert custom video tag generation scripts */\r\n    function insertVideoTag() {\r\n        try {\r\n            var videos = document.querySelectorAll('.byui-video');\r\n            for (var i = 0; i < videos.length; i++) {\r\n                if (videos[i].dataset.source == 'youtube') {\r\n                    videos[i].innerHTML = `<iframe width=\"${videos[i].dataset.width}px\" height=\"${videos[i].dataset.height}px\" src=\"https://www.youtube.com/embed/${videos[i].dataset.vidid}\" frameborder=\"0\" allowfullscreen></iframe>`;\r\n                } else if (videos[i].dataset.source == 'kaltura') {\r\n                    videos[i].innerHTML = `<iframe width=\"${videos[i].dataset.width}px\" height=\"${videos[i].dataset.height}px\" src=\"https://cdnapisec.kaltura.com/p/1157612/sp/115761200/embedIframeJs/uiconf_id/29018071/partner_id/1157612?iframeembed=true&amp;playerId=kaltura_player_1485805514&amp;entry_id=${videos[i].dataset.vidid}&amp;flashvars[streamerType]=auto\" frameborder=\"0\" allowfullscreen></iframe>`;\r\n                }\r\n            }\r\n        } catch (videoErr) {\r\n            console.error(videoErr);\r\n        }\r\n    }\r\n\r\n    /* handles all functions required to generate the course homepage */\r\n    function generateHomePage() {\r\n        /* generate top buttons (under.steps) */\r\n        function generateSteps(modules) {\r\n            try {\r\n                /* generate link to instructor bio - make the api call to get enrollments*/\r\n                $.get(`https://byui.instructure.com/api/v1/courses/${courseNumber}/enrollments?type%5B%5D=TeacherEnrollment`, teachers => {\r\n                    /* check for multiple instances of the same teacher */\r\n                    teachers = teachers.map(teacher => teacher.user_id).filter((teacherId, i, teachers) => teachers.indexOf(teacherId) === i);\r\n\r\n                    if (teachers.length > 1) {\r\n                        /* If there are multiple unique teachers */\r\n                        console.log('Multiple teachers are enrolled in this course. Please add \"Your Instructor\" link manually.');\r\n                    } else if (teachers.length === 0) {\r\n                        /* if the teacher isn't enrolled for some reason */\r\n                        console.log('Unable to find teacher enrollment.');\r\n                    } else {\r\n                        /* if we have one teacher set the URL */\r\n                        instructor.href = `/courses/${courseNumber}/users/${teachers[0]}`;\r\n                    }\r\n                });\r\n\r\n                /* Get additional resources module item */\r\n                var resourcesModule = modules.find(canvasModule => /student\\s*resources/i.test(canvasModule.name));\r\n\r\n                /* set home page buttons */\r\n                var start = document.querySelector('#start'),\r\n                    iLearnTutorial = document.querySelector('#tutorial'),\r\n                    resources = document.querySelector('#resources');\r\n\r\n                if (start)\r\n                    start.href = `/courses/${courseNumber}/modules#module_${modules[0].id}`;\r\n                if (iLearnTutorial)\r\n                    iLearnTutorial.href = 'http://byu-idaho.screenstepslive.com/s/16998/m/76692/l/865828-canvas-student-orientation?token=aq7F_UOmeDIj-6lBVDaXBdOQ01pfx1jw';\r\n                if (resources && resourcesModule)\r\n                    resources.href = `/courses/${courseNumber}/modules#module_${resourcesModule.id}`;\r\n            } catch (generateStepsErr) {\r\n                console.error(generateStepsErr);\r\n            }\r\n        }\r\n\r\n        /* generate lesson links (under .lessons) */\r\n        function generateLessons(modules) {\r\n            try {\r\n                /* Generate a Module link - called by above try statement */\r\n                function generateLessonLink(moduleId, moduleCount) {\r\n                    moduleCount++;\r\n                    /* append leading 0 */\r\n                    if (moduleCount < 10)\r\n                        moduleCount = `0${moduleCount}`;\r\n                    document.querySelector(lessonWrapperSelector).insertAdjacentHTML('beforeend', `<a href='/courses/${courseNumber}/modules#module_${moduleId}' style='width: calc(100% / ${modulesPerRow} - 20px);'>${moduleCount}</a>`);\r\n                }\r\n\r\n                var lessonWrapperSelector = '#navigation .lessons';\r\n\r\n                /* clear lesson div & generate module links if generate class exists */\r\n                if ([...document.querySelector(lessonWrapperSelector).classList].includes('generate')) {\r\n                    document.querySelector(lessonWrapperSelector).innerHTML = '';\r\n                    /* remove modules with invalid names & get modulesPerRow (limit 7) */\r\n                    var validModules = modules.filter(canvasModule => {\r\n                            return /(Week|Lesson|Unit)\\s*(1[0-9]|0?\\d(\\D|$))/gi.test(canvasModule.name);\r\n                        }),\r\n                        modulesPerRow = validModules.length > 7 ? 7 : validModules.length;\r\n\r\n                    /* generate module links */\r\n                    validModules.forEach((canvasModule, i) => {\r\n                        generateLessonLink(canvasModule.id, i);\r\n                    });\r\n                }\r\n            } catch (generateLessonErr) {\r\n                console.error(generateLessonErr);\r\n            }\r\n        }\r\n\r\n        try {\r\n            /* quit if we are not on the course homepage OR the page is missing the expected format */\r\n            if (document.querySelectorAll('#navigation .steps, #navigation .lessons').length === 0) {\r\n                return;\r\n            }\r\n\r\n            /* get course modules */\r\n            $.get('/api/v1/courses/' + courseNumber + '/modules?per_page=30', (modules) => {\r\n\r\n                generateSteps(modules);\r\n                generateLessons(modules);\r\n            });\r\n        } catch (selectorErr) {\r\n            console.error(selectorErr);\r\n        }\r\n    }\r\n\r\n    /* Hide the 3rd breadcrumb */\r\n    function alterBreadcrumb() {\r\n        try {\r\n            /* If there are 4 total, AND we're inside a course AND we're not in a group tab */\r\n            if (document.querySelectorAll('#breadcrumbs li').length === 4 && /\\.com\\/courses\\/\\d+\\/(?!groups)/i.test(window.location.href)) {\r\n                document.querySelectorAll('#breadcrumbs li:nth-child(3) span')[0].innerHTML = 'Modules';\r\n                /* update the link */\r\n                document.querySelectorAll('#breadcrumbs li:nth-child(3) a')[0].href = document.querySelectorAll('#breadcrumbs li:nth-child(3) a')[0].href.replace(/\\/\\w+$/i, '/modules');\r\n            }\r\n        } catch (breadcrumbErr) {\r\n            console.error(breadcrumbErr);\r\n        }\r\n    }\r\n\r\n    /* enable prism pre > code highlighting */\r\n    function prismHighlighting() {\r\n        try {\r\n            let codeUsed = document.querySelector('pre code');\r\n            if (codeUsed == null) return;\r\n\r\n            let jsEle = document.createElement('script'),\r\n                cssEle = document.createElement('link');\r\n            jsEle.src = 'https://content.byui.edu/integ/gen/a40c34d7-9f6f-4a18-a41d-2f40e2b2a18e/0/codeHighlighter.js';\r\n            cssEle.href = 'https://content.byui.edu/integ/gen/a40c34d7-9f6f-4a18-a41d-2f40e2b2a18e/0/codeHighlighter.css';\r\n            cssEle.rel = 'stylesheet';\r\n            document.head.appendChild(jsEle);\r\n            document.head.appendChild(cssEle);\r\n\r\n        } catch (prismErr) {\r\n            console.error(prismErr);\r\n        }\r\n    }\r\n\r\n    /* Insert copyright footer */\r\n    function addCopyrightFooter() {\r\n        try {\r\n            var page = document.getElementById('content');\r\n            if (page) {\r\n                /* don't add one if it already exists */\r\n                if (!document.querySelector('p.copyright') && !document.querySelector('p#byui-copyright'))\r\n                    page.insertAdjacentHTML('beforeend', `<p id='byui-copyright'>Copyright ${new Date().getFullYear()} Brigham Young University-Idaho</p>`);\r\n            } else {\r\n                throw new Error('unable to add copyright footer to page');\r\n            }\r\n        } catch (copyrightErr) {\r\n            console.error(copyrightErr);\r\n        }\r\n    }\r\n\r\n    /* add quiz.next tooltips where needed */\r\n    function addTooltips() {\r\n        let borderColor = 'black';\r\n        const divId = 'byui-quizzes-next-tooltip';\r\n        const settingsPage = window.location.href.includes('settings');\r\n        const assignmentsHTML = '<div>Be sure to periodically review the <a href=\"http://byu-idaho.screenstepslive.com/s/14177/m/73336/l/970385-quizzes-next-faq-s\" target=\"_blank\">Quizzes.Next FAQs</a> to keep updated on new features/div>';\r\n        const settingsHTML = '<div>Please review <a href=\"http://byu-idaho.screenstepslive.com/s/14177/m/73336/l/970385-quizzes-next-faq-s\" target=\"_blank\">these FAQs</a> to see the benefits and cautions before using Quizzes.Next</div>';\r\n\r\n        /* if the current href isn't the settings page or the assignments page, then return */\r\n        if (!settingsPage && !window.location.href.includes('assignments')) {\r\n            return;\r\n        }\r\n\r\n        /* create the tooltip div and set its attributes */\r\n        const div = document.createElement('div');\r\n        div.setAttribute('id', divId);\r\n        div.setAttribute('style', 'display:none');\r\n\r\n        /* assignment page's innerHTML for the tooltip */\r\n        div.innerHTML = assignmentsHTML;\r\n\r\n        /* the setting's page borderColor and innerHTML are different than the assignment's page */\r\n        if (settingsPage) {\r\n            borderColor = 'red';\r\n            div.innerHTML = settingsHTML;\r\n        }\r\n\r\n        /* create a style tag on the document and set its innerHTML */\r\n        const style = document.createElement('style');\r\n        style.innerHTML = `\r\n    .tippy-tooltip.honeybee-theme {\r\n        border: 2px solid ${borderColor};\r\n        background-color: white;\r\n        color: black;\r\n        max-width: 200px;\r\n      }\r\n      .tippy-backdrop {\r\n        background: white;\r\n      }`;\r\n\r\n        /* create a script tag, add the tooltip JavaScript to it, and add the tag to the document */\r\n        const selectors = '.quizzes_next, .new_quiz_lti_wrapper';\r\n        const script = document.createElement('script');\r\n        script.type = 'text/javascript';\r\n        script.async = true;\r\n        script.onload = function () {\r\n            tippy(selectors, {\r\n                html: `#${divId}`,\r\n                interactive: true,\r\n                placement: 'bottom-end',\r\n                theme: 'honeybee',\r\n                size: 'large'\r\n            })\r\n        };\r\n        script.src = 'https://unpkg.com/tippy.js@2.5.4/dist/tippy.all.min.js';\r\n\r\n        /* put the html tags in the document */\r\n        document.body.appendChild(div);\r\n        document.head.appendChild(style);\r\n        document.head.appendChild(script);\r\n\r\n    }\r\n\r\n    initializeAccordion();\r\n    initializeTabs();\r\n    insertVideoTag();\r\n    generateHomePage();\r\n    alterBreadcrumb();\r\n    prismHighlighting();\r\n    addCopyrightFooter();\r\n    addTooltips();\r\n}"]}