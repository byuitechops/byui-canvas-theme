{"version":3,"sources":["byui.js"],"names":["run","fn","e","console","error","loadScript","href","cb","querySelector","script","document","createElement","src","addEventListener","once","head","appendChild","loadStyle","link","rel","type","getjQuery","lessThan","A","B","length","Error","i","jQuery","needToLoad","jquery","currentVersion","split","noConflict","initializeCarousel","$","slick","dots","editorStyles","tinyMCE","cssNames","cssHrefs","querySelectorAll","forEach","linkTag","getAttribute","some","match","cssName","push","editors","editor","dom","styleSheetLoader","load","initializeAccordion","accordion","heightStyle","collapsible","active","initializeDialog","buttonId","exec","button","id","$button","dialog","autoOpen","preventDefault","insertVideoTag","dataset","source","video","innerHTML","width","height","vidid","generateSteps","courseNumber","modules","resourcesModule","find","test","canvasModule","name","start","iLearnTutorial","resources","instructor","get","teachers","filter","teacher","findIndex","teach","user_id","log","generateLessons","lessonWrapper","classList","contains","validModules","modulesPerRow","moduleCount","insertAdjacentHTML","generateHomePage","steps","lessons","location","pathname","alterBreadcrumb","window","replace","prismHighlighting","addCopyrightFooter","page","getElementById","includes","Date","getFullYear","warn","addTooltips","tip","borderColor","tippy","html","interactive","placement","theme","size","loadSlickJS","initializeTabs","tabs"],"mappings":"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","file":"byui.js","sourcesContent":["/**\n * version undefined\n */\n\n// import { runInContext } from \"vm\";\r\n\r\n/*eslint-env browser */\r\n/* eslint no-console:0 */\r\n/* global tinyMCE, tippy, $ */\r\n\r\n(function () {\r\n\r\n    window.addEventListener('load', function () {\r\n        run(initializeCarousel);\r\n        run(editorStyles);\r\n    });\r\n\r\n    document.addEventListener('DOMContentLoaded', function () {\r\n        run(initializeAccordion);\r\n        run(initializeDialog);\r\n        run(initializeTabs);\r\n        run(insertVideoTag);\r\n        run(generateHomePage);\r\n        run(alterBreadcrumb);\r\n        run(prismHighlighting);\r\n        run(addCopyrightFooter);\r\n        run(addTooltips);\r\n        run(loadSlickJS);\r\n    });\r\n\r\n\r\n\r\n    function run(fn) { try { fn(); } catch (e) { console.error(e); } }\r\n\r\n    function loadScript(href, cb) {\r\n\r\n        /* Checks if the script is already injected. If not, it will add it */\r\n        if (document.querySelector('script[src=\"' + href + '\"]') === null) {\r\n\r\n            var script = document.createElement('script');\r\n            script.src = href;\r\n            /* Call the callback once it is done loading */\r\n            if (cb) {\r\n\r\n                script.addEventListener('load', cb, { once: true });\r\n            }\r\n            /* Append script to the head of the document */\r\n            document.head.appendChild(script);\r\n        }\r\n    }\r\n\r\n    function loadStyle(href, cb) {\r\n        /* Checks if the style is already injected. If not, it will add it */\r\n        if (document.querySelector('link[href=\"' + href + '\"]') === null) {\r\n            var link = document.createElement('link');\r\n            link.rel = 'stylesheet';\r\n            link.type = 'text/css';\r\n            link.href = href;\r\n            /* Call the callback once it is done loading */\r\n            if (cb) {\r\n                script.addEventListener('load', cb, { once: true });\r\n\r\n            }\r\n            /* Append style to the head of the document */\r\n            document.head.appendChild(link);\r\n        }\r\n    }\r\n\r\n    function getjQuery(cb) {\r\n        /* If jQuery is already saved, use that */\r\n        if (this.jQuery) return cb(this.jQuery);\r\n\r\n        function lessThan(A, B) {\r\n            if (A.length != B.length) throw new Error('Comparing two different sizes');\r\n\r\n            for (var i = 0; i < A.length; i++) {\r\n                /* A is greater than B */\r\n                if (A[i] > B[i]) return false;\r\n                /* A is less than B */\r\n                else if (A[i] < B[i]) return true;\r\n            }\r\n            /* If A and B are equal */\r\n            return false;\r\n        }\r\n\r\n        var needToLoad = true;\r\n\r\n        if (typeof jQuery != 'undefined' || typeof jQuery().jquery != 'undefined') {\r\n            var currentVersion = jQuery().jquery.split('.');\r\n            needToLoad = lessThan(currentVersion, [1, 7, 0]);\r\n        }\r\n\r\n        if (needToLoad) {\r\n            loadScript('https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js', function () {\r\n                this.jQuery = jQuery.noConflict();\r\n                cb(this.jQuery);\r\n            })\r\n        } else {\r\n            this.jQuery = jQuery;\r\n            cb(jQuery);\r\n        }\r\n    }\r\n\r\n    /* Initialize carousels if any are present on page */\r\n    function initializeCarousel() {\r\n        if (document.querySelector('.byui .carousel')) {\r\n            getjQuery($ => {\r\n                $('.byui .carousel').slick({\r\n                    /* Shows dot indicators in the carousel */\r\n                    dots: true\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    /* inject css into tinyMCE editors on page. Has to wait till tinyMCE is done loading */\r\n    function editorStyles() {\r\n        /* if there are no WYSIWYG's on the page, don't bother running */\r\n        if (typeof tinyMCE != 'undefined') {\r\n            /* our css, canvas common css, canvas color vars css */\r\n            var cssNames = [/byui\\.css$/, /online\\.css$/, /common[\\w-]*\\.css$/, /variables[\\w-]*\\.css$/, /campus\\.css$/, /pathway\\.css$/];\r\n            var cssHrefs = [];\r\n            /* Collect list of hrefs that match one of the cssNames */\r\n            (document.querySelectorAll('link[rel=stylesheet]')).forEach(function (linkTag) {\r\n                var href = linkTag.getAttribute('href');\r\n                /* only keep the link if it matches one of the regExes */\r\n                if (cssNames.some(cssName => href.match(cssName) !== null)) {\r\n                    cssHrefs.push(href);\r\n                }\r\n            });\r\n\r\n            /* For each editor, inject each stylesheet */\r\n            tinyMCE.editors.forEach(editor => {\r\n                cssHrefs.forEach(href => {\r\n                    editor.dom.styleSheetLoader.load(href);\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    /* Initialize accordion - JQUERY UI */\r\n    function initializeAccordion() {\r\n        if (document.querySelector('.byui div.accordion')) {\r\n            getjQuery($ => {\r\n                $('.byui div.accordion').accordion({\r\n                    heightStyle: 'content',\r\n                    collapsible: true,\r\n                    active: false\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    /* Initialize dialog - JQUERY UI */\r\n    function initializeDialog() {\r\n        if (document.querySelector('.byui div.dialog')) {\r\n\r\n            document.querySelectorAll('.byui .Button[id^=\\'link_\\']').forEach(button => {\r\n                /* Save linkID */\r\n                let buttonId = /link_(\\d+)/i.exec(button.id)[1];\r\n                let $button = $(`.byui #dialog_for_link_${buttonId}`);\r\n\r\n                /* instantiate dialog */\r\n                $button.dialog({\r\n                    autoOpen: false\r\n                });\r\n\r\n                /* add event listener to open dialog */\r\n                button.addEventListener('click', (e) => {\r\n                    e.preventDefault();\r\n                    $button.dialog('open');\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    /* Insert custom video tag generation scripts */\r\n    function insertVideoTag() {\r\n        document.querySelectorAll('.byui-video').forEach(video => {\r\n            if (video.dataset.source == 'youtube') {\r\n                video.innerHTML = `<iframe width=\"${video.dataset.width}px\" height=\"${video.dataset.height}px\" src=\"https://www.youtube.com/embed/${video.dataset.vidid}\" frameborder=\"0\" allowfullscreen></iframe>`;\r\n            } else if (video.dataset.source == 'kaltura') {\r\n                video.innerHTML = `<iframe width=\"${video.dataset.width}px\" height=\"${video.dataset.height}px\" src=\"https://cdnapisec.kaltura.com/p/1157612/sp/115761200/embedIframeJs/uiconf_id/29018071/partner_id/1157612?iframeembed=true&amp;playerId=kaltura_player_1485805514&amp;entry_id=${video.dataset.vidid}&amp;flashvars[streamerType]=auto\" frameborder=\"0\" allowfullscreen></iframe>`;\r\n            }\r\n        });\r\n    }\r\n\r\n    /* generate top buttons (under.steps) */\r\n    function generateSteps(courseNumber, modules) {\r\n        /* Get additional resources module item */\r\n        var resourcesModule = modules.find(canvasModule => /student\\s*resources/i.test(canvasModule.name));\r\n\r\n        /* set home page buttons */\r\n        var start = document.querySelector('.byui #start'),\r\n            iLearnTutorial = document.querySelector('.byui #tutorial'),\r\n            resources = document.querySelector('.byui #resources'),\r\n            instructor = document.querySelector('.byui #instructor');\r\n\r\n        if (start)\r\n            start.href = `/courses/${courseNumber}/modules#module_${modules[0].id}`;\r\n        if (iLearnTutorial)\r\n            iLearnTutorial.href = 'http://byu-idaho.screenstepslive.com/s/16998/m/76692/l/865828-canvas-student-orientation';\r\n        if (resources && resourcesModule)\r\n            resources.href = `/courses/${courseNumber}/modules#module_${resourcesModule.id}`;\r\n\r\n        getjQuery($ => {\r\n            /* generate link to instructor bio - make the api call to get enrollments*/\r\n            $.get(`https://byui.instructure.com/api/v1/courses/${courseNumber}/enrollments?type%5B%5D=TeacherEnrollment&per_page=50`, teachers => {\r\n                /* check for multiple instances of the same teacher */\r\n                // TODO which one of these is faster?\r\n                // teachers = teachers.map(teacher => teacher.user_id).filter((teacherId, i, teachers) => teachers.indexOf(teacherId) === i);\r\n                teachers = teachers.filter((teacher, i, teachers) => teachers.findIndex(teach => teach.user_id == teacher.user_id) == i);\r\n\r\n\r\n                if (teachers.length > 1) {\r\n                    /* If there are multiple unique teachers */\r\n                    console.log('Multiple teachers are enrolled in this course. Please add \"Your Instructor\" link manually.');\r\n                } else if (teachers.length === 0) {\r\n                    /* if the teacher isn't enrolled for some reason */\r\n                    console.log('Unable to find teacher enrollment.');\r\n                } else {\r\n                    /* if we have one teacher set the URL */\r\n                    instructor.href = `/courses/${courseNumber}/users/${teachers[0].user_id}`;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /* generate lesson links (under .lessons) */\r\n    function generateLessons(courseNumber, modules) {\r\n\r\n        var lessonWrapper = document.querySelector('.byui #navigation .lessons');\r\n        /* clear lesson div & generate module links if generate class exists */\r\n        if (lessonWrapper.classList.contains('generate')) {\r\n            lessonWrapper.innerHTML = '';\r\n            /* remove modules with invalid names & get modulesPerRow (limit 7) */\r\n            var validModules = modules.filter(canvasModule => {\r\n                return /(Week|Lesson|Unit)\\s*(1[0-9]|0?\\d(\\D|$))/gi.test(canvasModule.name);\r\n            });\r\n            var modulesPerRow = validModules.length > 7 ? 7 : validModules.length;\r\n\r\n            /* generate module links */\r\n            validModules.forEach((canvasModule, i) => {\r\n                var moduleCount = (i < 9 ? '0' : '') + (i + 1);\r\n                lessonWrapper.insertAdjacentHTML('beforeend', `<a href='/courses/${courseNumber}/modules#module_${canvasModule.id}' style='width: calc(100% / ${modulesPerRow} - 20px);'>${moduleCount}</a>`)\r\n            });\r\n        }\r\n    }\r\n\r\n    /* handles all functions required to generate the course homepage */\r\n    function generateHomePage() {\r\n\r\n        /* if we are on the course homepage and the page has the expected format */\r\n        var steps = document.querySelector('.byui #navigation .steps');\r\n        var lessons = document.querySelector('.byui #navigation .lessons');\r\n        if (steps && lessons) {\r\n            var courseNumber = document.location.pathname.split('/')[2];\r\n            /* get course modules */\r\n            getjQuery($ => {\r\n                $.get('/api/v1/courses/' + courseNumber + '/modules?per_page=30', (modules) => {\r\n\r\n                    /* Don't run steps or lessons if they don't exist */\r\n                    if (steps) generateSteps(courseNumber, modules);\r\n                    if (lessons) generateLessons(courseNumber, modules);\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    /* Hide the 3rd breadcrumb */\r\n    function alterBreadcrumb() {\r\n        /* If there are 4 total, AND we're inside a course AND we're not in a group tab */\r\n        if (document.querySelectorAll('#breadcrumbs li').length === 4 && /\\.com\\/courses\\/\\d+\\/(?!groups)/i.test(window.location.href)) {\r\n            document.querySelector('#breadcrumbs li:nth-child(3) span').innerHTML = 'Modules';\r\n            /* update the link */\r\n            var link = document.querySelector('#breadcrumbs li:nth-child(3) a');\r\n            link.href = link.href.replace(/\\/\\w+$/i, '/modules');\r\n        }\r\n    }\r\n\r\n    /* enable prism pre > code highlighting */\r\n    function prismHighlighting() {\r\n        if (document.querySelector('pre code')) {\r\n            loadScript('https://content.byui.edu/integ/gen/a40c34d7-9f6f-4a18-a41d-2f40e2b2a18e/0/codeHighlighter.js');\r\n            loadStyle('https://content.byui.edu/integ/gen/a40c34d7-9f6f-4a18-a41d-2f40e2b2a18e/0/codeHighlighter.css');\r\n        }\r\n    }\r\n\r\n    /* Insert copyright footer */\r\n    function addCopyrightFooter() {\r\n        var page = document.getElementById('content');\r\n        if (page) {\r\n            /* don't add one if it already exists */\r\n            if (!document.querySelector('p.copyright') && !document.querySelector('p#byui-copyright') && !window.location.pathname.includes('speed_grader'))\r\n                page.insertAdjacentHTML('beforeend', `<p id='byui-copyright'>Copyright ${new Date().getFullYear()} Brigham Young University-Idaho</p>`);\r\n        } else {\r\n            console.warn('unable to add copyright footer to page');\r\n        }\r\n    }\r\n\r\n    /* add quiz.next tooltips where needed */\r\n    function addTooltips() {\r\n        var tip = '';\r\n        var divId = 'byui-quizzes-next-tooltip';\r\n        var borderColor = 'black';\r\n\r\n        /* Add appropriate tooltip OR return if we're on the wrong page */\r\n        if (window.location.href.includes('settings')) {\r\n            tip = 'Please review <a href=\"http://byu-idaho.screenstepslive.com/s/14177/m/73336/l/970385-quizzes-next-faq-s\" target=\"_blank\">these FAQs</a> to see the benefits and cautions before using Quizzes.Next';\r\n            borderColor = 'red';\r\n\r\n        } else if (window.location.href.includes('assignments')) {\r\n            tip = tip = `Be sure to periodically review the <a href=\"http://byu-idaho.screenstepslive.com/s/14177/m/73336/l/970385-quizzes-next-faq-s\" target=\"_blank\">Quizzes.Next FAQs</a> to keep updated on new features`;\r\n        } else {\r\n            return;\r\n        }\r\n\r\n        /* Inject the tooltip */\r\n        document.head.insertAdjacentHTML('beforeend', `<div id=\"${divId}\" style=\"display: none;\">${tip}</div>`);\r\n\r\n        /* Add tooltip styles to DOM with appropriate border color */\r\n        document.head.insertAdjacentHTML('beforeend', `\r\n        <style>\r\n            .tippy-tooltip.byui-theme {\r\n                border: 2px solid ${borderColor};\r\n                background-color: white;\r\n                color: black;\r\n                max-width: 200px;\r\n            }\r\n            .tippy-backdrop {\r\n                background: white;\r\n            }\r\n        </style>\r\n    `);\r\n\r\n        /* Load Tippy */\r\n        loadScript('https://content.byui.edu/integ/gen/a422cccd-35b7-4087-9329-20698cf169b0/0/tippy.all.min.js', function () {\r\n            tippy('.quizzes_next, .new_quiz_lti_wrapper', {\r\n                html: `#${divId}`,\r\n                interactive: true,\r\n                placement: 'bottom-end',\r\n                theme: 'byui',\r\n                size: 'large'\r\n            });\r\n        });\r\n    }\r\n\r\n    /* load JS & CSS needed for image carousels if there is one on the page */\r\n    function loadSlickJS() {\r\n        if (document.querySelector('.byui .carousel')) {\r\n            /* Script */\r\n            loadScript('https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js');\r\n            /* Css */\r\n            loadStyle('https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.css');\r\n            /* Theme */\r\n            loadStyle('https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.css');\r\n        }\r\n    }\r\n\r\n    /* Initialize tabs - JQUERY UI */\r\n    function initializeTabs() {\r\n\r\n        getjQuery($ => {\r\n            $('.byui #styleguide-tabs-demo-minimal').tabs();\r\n\r\n        });\r\n    }\r\n\r\n})();"]}